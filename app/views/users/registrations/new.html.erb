<div class="whole-page">
  <center><%= render '/shared/public_logo_and_nav' %></center>
  <div class="container">
    <div class="row">
      <div class="col-sm-4 col-sm-offset-4">
        <div class="light-well">
          <h2 class="page-header text-center">New User</h2>

          <% @first_name = "" %>
          <% @last_name = "" %>
          <% @email = "" %>
          <%= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path %>

          <div class="fb-login-button" data-size="large" data-button-type="continue_with" data-auto-logout-link="false" data-use-continue-as="false"></div>

          <% if session["devise.facebook_data"] != nil %>
            <% @first_name = session["devise.facebook_data"]["info"]["name"].split(" ")[0] %>
            <% @last_name = session["devise.facebook_data"]["info"]["name"].split(" ")[session["devise.facebook_data"]["info"]["name"].split(" ").length-1] %>
            <% @email = session["devise.facebook_data"]["info"]["email"] %>
          <% end %>

          <%= form_for resource, as: resource_name, url: registration_path(resource_name),
                        html: { class: "form-horizontal center"} do |f| %>
            <div class="form-group">
                <%= f.text_field :first_name, autofocus: true, placeholder: "First Name", :value => @first_name, class: "form-control" %>
            </div>

            <div class="form-group">
              <%= f.text_field :last_name, placeholder: "Last Name", :value => @last_name, class: "form-control" %>
            </div>
              <hr>
            <div class="form-group">
              <%= f.email_field :email, placeholder: "Email Address", :value => @email, class: "form-control" %>
            </div>
              <hr>
            <div class="form-group">
              <%= f.password_field :password, autocomplete: "off", placeholder: "Password", class: "form-control" %>
            </div>

            <div class="form-group">
              <%= f.password_field :password_confirmation, autocomplete: "off", placeholder: "Confirm Password", class: "form-control" %>

              <% if @validatable %>
                <p class="help-block"><%= @minimum_password_length %> characters minimum</p>
              <% end %>
            </div>
               <hr><br><hr>
            <div class="actions">
              <%= f.submit "Sign up", class: "btn btn-success btn-lg btn-block" %>
            </div>
            <%= devise_error_messages! %>
          <% end %>
        </div>
        <br>
        <br>
        <%= render "devise/shared/links" %>
      </div>
    </div>
  </div>
</div>